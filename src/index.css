@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* ================================================
   ALEPH NOTES â€” "Luminous Void" Design System
   ================================================ */

/* --- Semantic Color Tokens (Light) --- */
:root {
  --c-bg: #faf9f6;
  --c-bg-surface: #ffffff;
  --c-bg-elevated: #ffffff;
  --c-bg-hover: #f0efeb;
  --c-bg-active: #e8e7e2;
  --c-bg-sidebar: #f4f3ef;

  --c-edge: rgba(0, 0, 0, 0.08);
  --c-edge-strong: rgba(0, 0, 0, 0.14);

  --c-ink: #1a1a2e;
  --c-ink-secondary: #4a4a60;
  --c-ink-muted: #8080a0;
  --c-ink-ghost: #b8b8cc;

  --c-accent: #00a87d;
  --c-accent-hover: #009670;
  --c-accent-soft: rgba(0, 168, 125, 0.08);
  --c-accent-edge: rgba(0, 168, 125, 0.30);

  --c-danger: #dc3545;
  --c-danger-hover: #c82333;

  --c-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
  --c-shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.08);
  --c-glow: none;
  --c-glow-accent: none;
  --c-overlay: rgba(0, 0, 0, 0.4);
  --c-noise-opacity: 0.02;
  --c-gradient-subtle: radial-gradient(ellipse 80% 60% at 50% 40%, rgba(0, 168, 125, 0.03), transparent);
}

/* --- Semantic Color Tokens (Dark) --- */
.dark {
  --c-bg: #0a0a12;
  --c-bg-surface: #111119;
  --c-bg-elevated: #1a1a25;
  --c-bg-hover: #222230;
  --c-bg-active: #2a2a3a;
  --c-bg-sidebar: #08080e;

  --c-edge: rgba(255, 255, 255, 0.06);
  --c-edge-strong: rgba(255, 255, 255, 0.12);

  --c-ink: #e2e2ea;
  --c-ink-secondary: #9494a8;
  --c-ink-muted: #5c5c72;
  --c-ink-ghost: #34344a;

  --c-accent: #00d4aa;
  --c-accent-hover: #00ebbd;
  --c-accent-soft: rgba(0, 212, 170, 0.07);
  --c-accent-edge: rgba(0, 212, 170, 0.22);

  --c-danger: #ff4d6a;
  --c-danger-hover: #ff6680;

  --c-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 1px 2px rgba(0, 0, 0, 0.2);
  --c-shadow-lg: 0 8px 30px rgba(0, 0, 0, 0.5);
  --c-glow: 0 0 60px rgba(0, 212, 170, 0.04);
  --c-glow-accent: 0 0 20px rgba(0, 212, 170, 0.15);
  --c-overlay: rgba(0, 0, 0, 0.7);
  --c-noise-opacity: 0.03;
  --c-gradient-subtle: radial-gradient(ellipse 80% 60% at 50% 30%, rgba(0, 212, 170, 0.03), transparent 70%);
}

/* --- Tailwind Theme Registration --- */
@theme {
  --color-canvas: var(--c-bg);
  --color-surface: var(--c-bg-surface);
  --color-elevated: var(--c-bg-elevated);
  --color-hover: var(--c-bg-hover);
  --color-active: var(--c-bg-active);
  --color-sidebar: var(--c-bg-sidebar);

  --color-edge: var(--c-edge);
  --color-edge-strong: var(--c-edge-strong);

  --color-ink: var(--c-ink);
  --color-ink-secondary: var(--c-ink-secondary);
  --color-ink-muted: var(--c-ink-muted);
  --color-ink-ghost: var(--c-ink-ghost);

  --color-accent: var(--c-accent);
  --color-accent-hover: var(--c-accent-hover);
  --color-accent-soft: var(--c-accent-soft);
  --color-accent-edge: var(--c-accent-edge);

  --color-danger: var(--c-danger);
  --color-danger-hover: var(--c-danger-hover);

  --color-overlay: var(--c-overlay);

  --font-display: "Newsreader", Georgia, "Times New Roman", serif;
  --font-body: "DM Sans", system-ui, -apple-system, sans-serif;
}

/* --- Base Styles --- */
html {
  font-family: var(--font-display, "DM Sans", sans-serif);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-body);
  background: var(--c-bg);
  color: var(--c-ink);
}

/* --- Noise Texture Overlay --- */
.noise-bg::before {
  content: "";
  position: fixed;
  inset: 0;
  opacity: var(--c-noise-opacity);
  pointer-events: none;
  z-index: 9999;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

/* --- Custom Scrollbar --- */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--c-ink-ghost);
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--c-ink-muted);
}

/* --- Animations --- */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fade-in-scale {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes aleph-breathe {
  0%, 100% { opacity: 0.06; transform: scale(1) translateY(0); }
  50% { opacity: 0.10; transform: scale(1.01) translateY(-2px); }
}

@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 12px rgba(0, 212, 170, 0.15); }
  50% { box-shadow: 0 0 20px rgba(0, 212, 170, 0.25); }
}

@keyframes slide-in-left {
  from { opacity: 0; transform: translateX(-12px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slide-up {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out both;
}

.animate-fade-in-scale {
  animation: fade-in-scale 0.3s ease-out both;
}

.animate-slide-in-left {
  animation: slide-in-left 0.3s ease-out both;
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out both;
}

/* --- Tiptap Editor Styles --- */
.ProseMirror {
  outline: none;
  min-height: 200px;
  font-family: var(--font-body);
  font-size: 1rem;
  line-height: 1.75;
  color: var(--c-ink);
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--c-ink-ghost);
  font-style: italic;
  pointer-events: none;
  height: 0;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3 {
  font-family: var(--font-display, "Newsreader", serif);
  font-weight: 600;
  color: var(--c-ink);
  line-height: 1.3;
}

.ProseMirror h1 { font-size: 1.75rem; margin-top: 2rem; margin-bottom: 0.75rem; }
.ProseMirror h2 { font-size: 1.35rem; margin-top: 1.75rem; margin-bottom: 0.6rem; }
.ProseMirror h3 { font-size: 1.15rem; margin-top: 1.5rem; margin-bottom: 0.5rem; }

.ProseMirror p {
  margin-bottom: 0.75rem;
}

.ProseMirror ul,
.ProseMirror ol {
  padding-left: 1.5rem;
  margin-bottom: 0.75rem;
}

.ProseMirror li {
  margin-bottom: 0.25rem;
}

.ProseMirror blockquote {
  border-left: 3px solid var(--c-accent);
  padding-left: 1rem;
  color: var(--c-ink-secondary);
  font-style: italic;
  margin: 1rem 0;
}

.ProseMirror code {
  background: var(--c-bg-elevated);
  border: 1px solid var(--c-edge);
  border-radius: 4px;
  padding: 0.15rem 0.35rem;
  font-size: 0.875em;
}

.ProseMirror pre {
  background: var(--c-bg-elevated);
  border: 1px solid var(--c-edge);
  border-radius: 8px;
  padding: 1rem;
  overflow-x: auto;
  margin: 1rem 0;
}

.ProseMirror pre code {
  background: none;
  border: none;
  padding: 0;
}

.ProseMirror a {
  color: var(--c-accent);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.ProseMirror hr {
  border: none;
  border-top: 1px solid var(--c-edge);
  margin: 2rem 0;
}

.ProseMirror img {
  max-width: 100%;
  border-radius: 8px;
  margin: 1rem 0;
}

/* --- Task List --- */
.ProseMirror ul[data-type="taskList"] {
  list-style: none;
  padding-left: 0;
}

.ProseMirror ul[data-type="taskList"] li {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
}

.ProseMirror ul[data-type="taskList"] li > label {
  flex-shrink: 0;
  margin-top: 0.25rem;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"] {
  appearance: none;
  width: 1.125rem;
  height: 1.125rem;
  border: 2px solid var(--c-ink-ghost);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s ease;
  position: relative;
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked {
  background: var(--c-accent);
  border-color: var(--c-accent);
}

.ProseMirror ul[data-type="taskList"] li > label input[type="checkbox"]:checked::after {
  content: "";
  position: absolute;
  left: 3px;
  top: 0px;
  width: 6px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.ProseMirror ul[data-type="taskList"] li[data-checked="true"] > div > p {
  text-decoration: line-through;
  color: var(--c-ink-muted);
}

/* Nested task lists */
.ProseMirror ul[data-type="taskList"] ul[data-type="taskList"] {
  padding-left: 1.5rem;
}

/* --- Tables --- */
.ProseMirror table {
  border-collapse: collapse;
  width: 100%;
  margin: 1rem 0;
  overflow: hidden;
  border-radius: 8px;
  border: 1px solid var(--c-edge);
}

.ProseMirror th,
.ProseMirror td {
  border: 1px solid var(--c-edge);
  padding: 0.5rem 0.75rem;
  text-align: left;
  vertical-align: top;
  min-width: 80px;
}

.ProseMirror th {
  background: var(--c-bg-elevated);
  font-weight: 600;
  font-size: 0.875em;
  color: var(--c-ink-secondary);
}

.ProseMirror td {
  background: var(--c-bg-surface);
}

.ProseMirror .selectedCell {
  background: var(--c-accent-soft);
}

/* --- Highlight Mark --- */
.ProseMirror mark {
  background: var(--c-accent-soft);
  border-radius: 2px;
  padding: 0.1em 0.2em;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

/* --- Syntax Highlighting (Material Palenight-inspired) --- */
.ProseMirror pre code .hljs-comment,
.ProseMirror pre code .hljs-quote {
  color: #676e95;
  font-style: italic;
}

.ProseMirror pre code .hljs-keyword,
.ProseMirror pre code .hljs-selector-tag,
.ProseMirror pre code .hljs-tag {
  color: #c792ea;
}

.ProseMirror pre code .hljs-string,
.ProseMirror pre code .hljs-template-tag,
.ProseMirror pre code .hljs-addition {
  color: #c3e88d;
}

.ProseMirror pre code .hljs-number,
.ProseMirror pre code .hljs-literal,
.ProseMirror pre code .hljs-type,
.ProseMirror pre code .hljs-params {
  color: #f78c6c;
}

.ProseMirror pre code .hljs-built_in,
.ProseMirror pre code .hljs-title,
.ProseMirror pre code .hljs-section {
  color: #82aaff;
}

.ProseMirror pre code .hljs-attr,
.ProseMirror pre code .hljs-attribute,
.ProseMirror pre code .hljs-variable {
  color: #ffcb6b;
}

.ProseMirror pre code .hljs-name,
.ProseMirror pre code .hljs-selector-id,
.ProseMirror pre code .hljs-selector-class {
  color: #f07178;
}

.ProseMirror pre code .hljs-deletion {
  color: #ff5370;
}

.ProseMirror pre code .hljs-meta {
  color: #89ddff;
}

/* --- Share Page Prose --- */
.share-prose h1,
.share-prose h2,
.share-prose h3 {
  font-family: var(--font-display, "Newsreader", serif);
  font-weight: 600;
}

/* --- Selection --- */
::selection {
  background: var(--c-accent-soft);
  color: var(--c-ink);
}

/* --- Focus Visible --- */
*:focus-visible {
  outline: 2px solid var(--c-accent);
  outline-offset: 2px;
  border-radius: 4px;
}

/* --- Landing Page --- */
.landing-gradient-text {
  background: linear-gradient(135deg, var(--c-accent) 0%, #00e6c3 50%, var(--c-accent) 100%);
  background-size: 200% auto;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: shimmer 4s linear infinite;
}

.landing-reveal {
  opacity: 0;
  transform: translateY(24px);
  transition: opacity 0.7s cubic-bezier(0.16, 1, 0.3, 1), transform 0.7s cubic-bezier(0.16, 1, 0.3, 1);
}

.landing-reveal.revealed {
  opacity: 1;
  transform: translateY(0);
}

/* --- Dialog Backdrop --- */
dialog::backdrop {
  background: var(--c-overlay);
  backdrop-filter: blur(4px);
}
